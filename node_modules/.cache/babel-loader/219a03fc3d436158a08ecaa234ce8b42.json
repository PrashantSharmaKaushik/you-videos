{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = getThumbnailURL;\n\nvar _url = require('url');\n\nvar _bluebird = require('bluebird');\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _requestPromise = require('request-promise');\n\nvar _requestPromise2 = _interopRequireDefault(_requestPromise);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n} //extract id from url path\n\n\nvar RE_VIMEO = /^(?:\\/video|\\/channels\\/[\\w-]+|\\/groups\\/[\\w-]+\\/videos)?\\/(\\d+)$/;\nvar RE_YOUTUBE = /^(?:\\/embed)?\\/([\\w-]{10,12})$/;\nvar RE_FACEBOOK = /^\\/[\\w-]+\\/videos\\/(\\d+)(\\/)?$/;\n\nfunction getThumbnailURL(url) {\n  return _bluebird2.default.try(function () {\n    url = url || '';\n    var urlobj = (0, _url.parse)(url, true); //youtube\n\n    if (['www.youtube.com', 'youtube.com', 'youtu.be'].indexOf(urlobj.host) !== -1) {\n      var video_id = null;\n\n      if ('v' in urlobj.query) {\n        if (urlobj.query.v && urlobj.query.v.match(/^[\\w-]{10,12}$/)) {\n          video_id = urlobj.query.v;\n        }\n      } else {\n        var match = RE_YOUTUBE.exec(urlobj.pathname);\n\n        if (match) {\n          video_id = match[1];\n        }\n      }\n\n      if (video_id) {\n        return 'http://img.youtube.com/vi/' + video_id + '/hqdefault.jpg';\n      }\n    } //vimeo\n\n\n    if (['www.vimeo.com', 'vimeo.com', 'player.vimeo.com'].indexOf(urlobj.host) !== -1) {\n      var _match = RE_VIMEO.exec(urlobj.pathname);\n\n      if (_match) {\n        var _video_id = _match[1];\n        return (0, _requestPromise2.default)({\n          uri: 'https://vimeo.com/api/v2/video/' + _video_id + '.json',\n          json: true\n        }).then(function (data) {\n          if (data) {\n            return data[0].thumbnail_large;\n          }\n        });\n      }\n    } //facebook\n\n\n    if (['facebook.com', 'www.facebook.com'].indexOf(urlobj.host) !== -1) {\n      var _match2 = RE_FACEBOOK.exec(urlobj.pathname);\n\n      if (_match2) {\n        var _video_id2 = _match2[1];\n        return (0, _requestPromise2.default)({\n          uri: 'https://graph.facebook.com/' + _video_id2,\n          json: true\n        }).then(function (data) {\n          if (data) {\n            return data.picture;\n          }\n        });\n      }\n    }\n\n    return null;\n  });\n}","map":null,"metadata":{},"sourceType":"script"}